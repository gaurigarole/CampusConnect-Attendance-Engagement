<template>
    <lightning-card title="Attendance Overview" icon-name="utility:chart">
        <div class="attendance-container slds-p-around_medium">
            <!-- Progress Ring -->
            <div class="progress-section slds-text-align_center slds-m-bottom_medium">
                <div class="progress-ring-container">
                    <svg class="progress-ring" width="120" height="120">
                        <circle
                            class="progress-ring-background"
                            stroke="#e5e5e5"
                            stroke-width="8"
                            fill="transparent"
                            r="45"
                            cx="60"
                            cy="60"/>
                        <circle
                            class={progressRingClass}
                            stroke-width="8"
                            fill="transparent"
                            r="45"
                            cx="60"
                            cy="60"
                            stroke-dasharray={strokeDasharray}
                            stroke-dashoffset="0"/>
                    </svg>
                    <div class="progress-text">
                        <div class="percentage-text">{attendancePercentage}%</div>
                        <div class="status-text">Attendance</div>
                    </div>
                </div>
            </div>

            <!-- Status Badge -->
            <div class="status-section slds-text-align_center slds-m-bottom_medium">
                <lightning-badge 
                    label={attendanceStatus} 
                    variant={statusVariant}>
                </lightning-badge>
            </div>

            <!-- Quick Stats -->
            <div class="stats-grid slds-grid slds-wrap slds-gutters_small">
                <div class="slds-col slds-size_1-of-2">
                    <div class="stat-item slds-text-align_center slds-p-around_small">
                        <lightning-icon 
                            icon-name="utility:identity" 
                            size="small" 
                            class="slds-m-bottom_x-small">
                        </lightning-icon>
                        <div class="stat-label">Student ID</div>
                        <div class="stat-value">{studentNumber}</div>
                    </div>
                </div>
                <div class="slds-col slds-size_1-of-2">
                    <div class="stat-item slds-text-align_center slds-p-around_small">
                        <lightning-icon 
                            icon-name={statusIcon} 
                            size="small" 
                            variant={statusVariant}
                            class="slds-m-bottom_x-small">
                        </lightning-icon>
                        <div class="stat-label">Status</div>
                        <div class="stat-value">{attendanceStatus}</div>
                    </div>
                </div>
            </div>

            <!-- Action Buttons -->
            <div class="action-buttons slds-text-align_center slds-m-top_medium">
                <lightning-button 
                    label="Mark Attendance" 
                    variant="brand" 
                    icon-name="utility:check"
                    class="slds-m-right_small"
                    onclick={handleMarkAttendance}>
                </lightning-button>
                <lightning-button 
                    label="Send Email" 
                    variant="neutral" 
                    icon-name="utility:email"
                    onclick={handleSendEmail}>
                </lightning-button>
            </div>
        </div>
    </lightning-card>
</template>
